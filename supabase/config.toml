project_id = "pxqbxhlfvafcjfpycjsh"

# Edge Function JWT Configuration
# verify_jwt = false is required for:
# 1. CORS preflight (OPTIONS) requests which don't include auth headers
# 2. These functions implement manual JWT verification via getClaims() for security
# 3. Manual auth allows proper error responses instead of Supabase's default 401

[functions.send-announcement-notification]
# Admin-only function to broadcast announcement emails to all opted-in active members
# Manually verifies JWT and checks admin role
verify_jwt = false

[functions.send-notification]
# Manually verifies JWT and checks admin role (lines 26-67 in index.ts)
# Only admins can send notifications - enforced via is_admin() RPC check
verify_jwt = false

[functions.send-payment-receipt]
# Manually verifies JWT and user ownership (lines 31-66 in index.ts)
# Users can only receive receipts for their own payments
verify_jwt = false

[functions.send-event-notification]
# Manually verifies JWT and checks admin role
# Only admins can send event notifications to members
verify_jwt = false

[functions.send-registration-confirmation]
# Manually verifies JWT and user ownership
# Users receive confirmation when registering for events
verify_jwt = false

[functions.send-event-reminder]
# Cron-triggered function to send event reminders
# Uses service role - no JWT verification needed
verify_jwt = false

[functions.import-members]
# Admin-only function to import members with proper auth user creation
# Manually verifies JWT and checks admin role
verify_jwt = false

[functions.process-payment]
# Manually verifies JWT and user identity for payment processing
# Uses Hubtel Mobile Money API for Ghana payments
verify_jwt = false

[functions.verify-payment]
# Manually verifies JWT and user ownership of payment record
# Checks payment status with Hubtel API
verify_jwt = false

[functions.hubtel-callback]
# Webhook endpoint for Hubtel payment status callbacks
# No JWT verification - validates via ClientReference matching
verify_jwt = false

[functions.initiate-hubtel-checkout]
# Initiates Hubtel Redirect Checkout for web payments
# Manually verifies JWT for user authentication
verify_jwt = false

[functions.get-hubtel-config]
# Returns Hubtel config for authenticated users (legacy SDK support)
# Manually verifies JWT
verify_jwt = false

[functions.check-hubtel-status]
# Checks transaction status directly with Hubtel API
# Manually verifies JWT and user ownership of payment
verify_jwt = false

[functions.check-email-exists]
# Public endpoint to check if email is already registered
# No JWT needed - only returns boolean, no sensitive data
verify_jwt = false

[functions.initiate-registration-payment]
# Post-registration payment initiation (unauthenticated)
# Security: validates email matches profile created within 10 minutes
verify_jwt = false